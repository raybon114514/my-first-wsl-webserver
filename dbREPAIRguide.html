<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MariaDB è³‡æ–™åº«å®‰è£èˆ‡é‡ç½®æŒ‡å—</title>
    <style>
        :root {
            --primary: #00618a; /* MariaDB Blue */
            --danger: #dc3545;
            --success: #198754;
            --bg: #f4f6f9;
            --code-bg: #212529;
            --code-text: #e9ecef;
        }

        body {
            font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            line-height: 1.6;
            background-color: var(--bg);
            color: #333;
            margin: 0;
            padding: 20px;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            padding: 40px;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        h1 {
            color: var(--primary);
            text-align: center;
            border-bottom: 2px solid #eee;
            padding-bottom: 20px;
        }

        h2 {
            margin-top: 40px;
            border-left: 5px solid var(--primary);
            padding-left: 15px;
            color: #444;
        }

        h2.danger {
            border-left-color: var(--danger);
            color: var(--danger);
        }

        .step-box {
            background: #fff;
            border: 1px solid #ddd;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
        }

        pre {
            background-color: var(--code-bg);
            color: var(--code-text);
            padding: 15px;
            border-radius: 6px;
            overflow-x: auto;
            font-family: 'Consolas', 'Monaco', monospace;
            position: relative;
        }

        code {
            font-family: 'Consolas', 'Monaco', monospace;
        }

        .note {
            background-color: #e7f5ff;
            border-left: 4px solid var(--primary);
            padding: 15px;
            margin: 15px 0;
        }

        .alert {
            background-color: #fff5f5;
            border-left: 4px solid var(--danger);
            padding: 15px;
            margin: 15px 0;
            color: #842029;
        }

        ul {
            padding-left: 20px;
        }

        li {
            margin-bottom: 10px;
        }

        .qa-list dt {
            font-weight: bold;
            margin-top: 15px;
        }
        .qa-list dd {
            margin-left: 20px;
            margin-bottom: 10px;
            color: #555;
        }
        
        .badge {
            display: inline-block;
            padding: 3px 8px;
            border-radius: 4px;
            font-size: 0.85em;
            font-weight: bold;
            color: white;
        }
        .badge-wsl { background-color: #6f42c1; }

    </style>
</head>
<body>

<div class="container">
    <h1>MariaDB è³‡æ–™åº«å®Œå…¨æ‰‹å†Š<br><small style="font-size: 0.5em; color: #666;">å®‰è£ã€è¨­å®šèˆ‡ç·Šæ€¥æ•‘æ´ (Ubuntu / WSL)</small></h1>

    <div class="note">
        é€™ä»½æŒ‡å—é©ç”¨æ–¼ Ubuntu 22.04 LTSã€‚å¦‚æœæ‚¨ä½¿ç”¨ <strong>WSL</strong>ï¼Œè«‹ç‰¹åˆ¥æ³¨æ„æ¨™è¨˜ç‚º <span class="badge badge-wsl">WSL å°ˆç”¨</span> çš„æç¤ºã€‚
    </div>

    <h2>ç¬¬ä¸€éšæ®µï¼šå…¨æ–°å®‰è£</h2>
    
    <div class="step-box">
        <h3>1. æ›´æ–°ä¸¦å®‰è£</h3>
        <p>ç¢ºä¿ç³»çµ±æŠ“åˆ°æœ€æ–°çš„è³‡æ–™åº«ç‰ˆæœ¬ã€‚</p>
        <pre><code>sudo apt update
sudo apt install mariadb-server -y</code></pre>
    </div>

    <div class="step-box">
        <h3>2. å•Ÿå‹•æœå‹™ <span class="badge badge-wsl">WSL é‡é»</span></h3>
        <p>WSL ä¸æœƒè‡ªå‹•å•Ÿå‹•æœå‹™ï¼Œå®‰è£å®Œå¿…é ˆæ‰‹å‹•é–‹å•Ÿ (çœ‹åˆ° active ä»£è¡¨æˆåŠŸ)ã€‚</p>
        <pre><code>sudo service mariadb start
sudo service mariadb status</code></pre>
    </div>

    <h2>ç¬¬äºŒéšæ®µï¼šå®‰å…¨è¨­å®š (æœ€å®¹æ˜“å‡ºéŒ¯è™•)</h2>
    <p>å®‰è£å¾Œå¿…é ˆåŸ·è¡Œæ­¤æŒ‡ä»¤ä¾†è¨­å®š Root å¯†ç¢¼ã€‚</p>
    <pre><code>sudo mysql_secure_installation</code></pre>

    <div class="step-box">
        <h3>è¨­å®šå•ç­”å°ç…§è¡¨</h3>
        <dl class="qa-list">
            <dt>1. Enter current password for root (enter for none):</dt>
            <dd>ğŸ‘‰ <strong>ç›´æ¥æŒ‰ Enter</strong> (å› ç‚ºå‰›è£å¥½æ²’å¯†ç¢¼)</dd>

            <dt>2. Switch to unix_socket authentication? [Y/n]</dt>
            <dd>ğŸ‘‰ è¼¸å…¥ <strong>n</strong> (æˆ‘å€‘æƒ³ç”¨å‚³çµ±å¯†ç¢¼ç™»å…¥)</dd>

            <dt>3. Change the root password? [Y/n]</dt>
            <dd>ğŸ‘‰ è¼¸å…¥ <strong>y</strong></dd>
            <dd>ğŸ‘‰ è¼¸å…¥æ–°å¯†ç¢¼ (è¢å¹•ä¸æœƒé¡¯ç¤º)ï¼Œå†è¼¸å…¥ä¸€æ¬¡ç¢ºèªã€‚</dd>

            <dt>4. Remove anonymous users? [Y/n]</dt>
            <dd>ğŸ‘‰ è¼¸å…¥ <strong>y</strong> (ç§»é™¤åŒ¿åå¸³è™Ÿ)</dd>

            <dt>5. Disallow root login remotely? [Y/n]</dt>
            <dd>ğŸ‘‰ è¼¸å…¥ <strong>y</strong> (ç¦æ­¢ root é ç«¯ç™»å…¥)</dd>

            <dt>6. Remove test database? [Y/n]</dt>
            <dd>ğŸ‘‰ è¼¸å…¥ <strong>y</strong> (åˆªé™¤æ¸¬è©¦è³‡æ–™)</dd>

            <dt>7. Reload privilege tables now? [Y/n]</dt>
            <dd>ğŸ‘‰ è¼¸å…¥ <strong>y</strong> (ç”Ÿæ•ˆè¨­å®š)</dd>
        </dl>
    </div>

    <h2>ç¬¬ä¸‰éšæ®µï¼šå»ºç«‹ä¸€èˆ¬ä½¿ç”¨è€…</h2>
    <p>ä¸è¦ä½¿ç”¨ Root è·‘ç¨‹å¼ï¼Œå»ºç«‹ä¸€å€‹å°ˆç”¨å¸³è™Ÿã€‚</p>
    
    <h3>1. ç™»å…¥è³‡æ–™åº«</h3>
    <pre><code>sudo mariadb -u root -p</code></pre>
    <p><em>(è¼¸å…¥å‰›å‰›è¨­å®šçš„ Root å¯†ç¢¼)</em></p>

    <h3>2. åŸ·è¡Œ SQL æŒ‡ä»¤</h3>
    <p>å°‡ä»¥ä¸‹æŒ‡ä»¤è¤‡è£½è²¼ä¸Š (å¯è‡ªè¡Œä¿®æ”¹å¸³è™Ÿå¯†ç¢¼)ï¼š</p>
    <pre><code>-- å»ºç«‹è³‡æ–™åº«
CREATE DATABASE mydb;

-- å»ºç«‹ä½¿ç”¨è€… (è«‹è‡ªè¡Œä¿®æ”¹ myuser èˆ‡ mypassword)
CREATE USER 'myuser'@'localhost' IDENTIFIED BY 'mypassword';

-- çµ¦äºˆæ¬Šé™
GRANT ALL PRIVILEGES ON mydb.* TO 'myuser'@'localhost';

-- é‡æ–°è¼‰å…¥ä¸¦é›¢é–‹
FLUSH PRIVILEGES;
EXIT;</code></pre>

    <h3>3. æ¸¬è©¦æ–°å¸³è™Ÿ</h3>
    <pre><code>mariadb -u myuser -p</code></pre>
    <p>å¦‚æœæˆåŠŸç™»å…¥ï¼Œä»£è¡¨å®‰è£å®Œæˆï¼</p>

    <hr style="margin: 50px 0; border: 0; border-top: 2px dashed #ccc;">

    <h2 class="danger">âš ï¸ ç·Šæ€¥æ•‘æ´ï¼šå¾¹åº•åˆªé™¤ä¸¦é‡è£</h2>
    <div class="alert">
        <strong>è­¦å‘Šï¼š</strong> å¦‚æœæ‚¨è¨­å®šå¤±æ•—ã€å¿˜è¨˜å¯†ç¢¼æˆ–ç³»çµ±éŒ¯äº‚ï¼Œè«‹åŸ·è¡Œæ­¤å€å¡Šã€‚
        <br><strong>é€™å°‡æœƒåˆªé™¤æ‰€æœ‰è³‡æ–™åº«å…§å®¹ï¼Œè®“ç³»çµ±å›åˆ°é‚„æ²’å®‰è£å‰çš„ç‹€æ…‹ã€‚</strong>
    </div>

    <div class="step-box">
        <h3>æ­¥é©Ÿ 1: åœæ­¢æœå‹™èˆ‡ç§»é™¤è»Ÿé«”</h3>
        <pre><code># åœæ­¢é‹ä½œ
sudo service mariadb stop

# ç§»é™¤è»Ÿé«”èˆ‡è¨­å®šæª”
sudo apt purge mariadb-server mariadb-client mariadb-common -y

# æ¸…é™¤ç›¸ä¾å¥—ä»¶
sudo apt autoremove -y
sudo apt autoclean</code></pre>
    </div>

    <div class="step-box" style="border-color: var(--danger);">
        <h3 style="color: var(--danger);">æ­¥é©Ÿ 2: æ‰‹å‹•åˆªé™¤æ®˜ç•™æª”æ¡ˆ (é—œéµ)</h3>
        <p>é€™ä¸€æ­¥æœ€é‡è¦ï¼Œå¦‚æœä¸åˆªé™¤é€™äº›è³‡æ–™å¤¾ï¼Œé‡è£å¾ŒèˆŠçš„éŒ¯èª¤è¨­å®šé‚„æœƒå­˜åœ¨ã€‚</p>
        <pre><code># åˆªé™¤è¨­å®šæª”ç›®éŒ„
sudo rm -rf /etc/mysql

# åˆªé™¤è³‡æ–™åº«å„²å­˜ç›®éŒ„ (é€™è£¡å­˜è‘—èˆŠå¯†ç¢¼)
sudo rm -rf /var/lib/mysql</code></pre>
    </div>

    <div class="step-box">
        <h3>æ­¥é©Ÿ 3: é‡æ–°é–‹å§‹</h3>
        <p>åŸ·è¡Œå®Œä¸Šè¿°æ­¥é©Ÿå¾Œï¼Œè«‹å›åˆ°æ–‡ä»¶æœ€ä¸Šæ–¹çš„ <strong>ã€Œç¬¬ä¸€éšæ®µã€</strong> é‡æ–°å®‰è£å³å¯ã€‚</p>
    </div>

</div>

</body>
</html>